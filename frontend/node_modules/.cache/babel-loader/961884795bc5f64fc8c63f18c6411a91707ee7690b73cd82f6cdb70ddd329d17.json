{"ast":null,"code":"import React,{useState,useRef}from'react';import'./DragAndDrop.css';import addimage from'../images/addimage2.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DragAndDrop=_ref=>{let{onFilesSelected}=_ref;const[highlight,setHighlight]=useState(false);const[uploadedImage,setUploadedImage]=useState(null);const[apiResponse,setApiResponse]=useState(null);const fileInputRef=useRef(null);const handleDragOver=event=>{event.preventDefault();setHighlight(true);};const handleDragLeave=()=>{setHighlight(false);};const handleDrop=async event=>{event.preventDefault();setHighlight(false);const files=event.dataTransfer.files;const filteredFiles=filterFiles(Array.from(files));if(filteredFiles.length>0){const uploadedFile=filteredFiles[0];setUploadedImage(URL.createObjectURL(uploadedFile));// Call API with the uploaded image\nawait uploadImage(uploadedFile);}};const openFileDialog=()=>{fileInputRef.current.click();};const handleFileInputChange=async event=>{const files=event.target.files;const filteredFiles=filterFiles(Array.from(files));if(filteredFiles.length>0){const uploadedFile=filteredFiles[0];setUploadedImage(URL.createObjectURL(uploadedFile));// Call API with the uploaded image\nawait uploadImage(uploadedFile);}};const filterFiles=files=>{return files.filter(file=>{const fileType=file.type;return fileType==='image/jpeg'||fileType==='image/png';});};const uploadImage=async imageFile=>{const formData=new FormData();formData.append('fileToUpload',imageFile);try{const response=await fetch('http://127.0.0.1:8000/process_image/',{method:'POST',body:formData,mode:'no-cors'// Set mode to 'no-cors' to bypass CORS\n});if(!response.ok){throw new Error('Failed to upload image');}const responseData=await response.json();console.log(response);setApiResponse(responseData);console.log(\"hi\");}catch(error){console.error('Error uploading image:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"drag-drop-area \".concat(highlight?'highlight':''),onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,onClick:openFileDialog,children:[/*#__PURE__*/_jsx(\"img\",{src:uploadedImage||addimage,alt:\"uploaded image\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,className:\"file-input\",type:\"file\",onChange:handleFileInputChange,accept:\".jpg,.jpeg,.png\",multiple:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"drag-drop-text\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"span1\",children:\"Drag and drop\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\" or \",/*#__PURE__*/_jsx(\"span\",{className:\"span2\",children:\"upload\"}),\" your image here.\"]})]}),apiResponse&&/*#__PURE__*/_jsxs(\"div\",{className:\"api-response\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"API Response:\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(apiResponse,null,2)})]})]});};export default DragAndDrop;","map":{"version":3,"names":["React","useState","useRef","addimage","jsx","_jsx","jsxs","_jsxs","DragAndDrop","_ref","onFilesSelected","highlight","setHighlight","uploadedImage","setUploadedImage","apiResponse","setApiResponse","fileInputRef","handleDragOver","event","preventDefault","handleDragLeave","handleDrop","files","dataTransfer","filteredFiles","filterFiles","Array","from","length","uploadedFile","URL","createObjectURL","uploadImage","openFileDialog","current","click","handleFileInputChange","target","filter","file","fileType","type","imageFile","formData","FormData","append","response","fetch","method","body","mode","ok","Error","responseData","json","console","log","error","className","concat","onDragOver","onDragLeave","onDrop","onClick","children","src","alt","ref","onChange","accept","multiple","JSON","stringify"],"sources":["/home/sharad/Desktop/Major-frontend/src/components/DragAndDrop.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport './DragAndDrop.css';\nimport addimage from '../images/addimage2.png';\n\nconst DragAndDrop = ({ onFilesSelected }) => {\n  const [highlight, setHighlight] = useState(false);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  const [apiResponse, setApiResponse] = useState(null);\n  const fileInputRef = useRef(null);\n\n  const handleDragOver = (event) => {\n    event.preventDefault();\n    setHighlight(true);\n  };\n\n  const handleDragLeave = () => {\n    setHighlight(false);\n  };\n\n  const handleDrop = async (event) => {\n    event.preventDefault();\n    setHighlight(false);\n\n    const files = event.dataTransfer.files;\n    const filteredFiles = filterFiles(Array.from(files));\n\n    if (filteredFiles.length > 0) {\n      const uploadedFile = filteredFiles[0];\n      setUploadedImage(URL.createObjectURL(uploadedFile));\n\n      // Call API with the uploaded image\n      await uploadImage(uploadedFile);\n    }\n  };\n\n  const openFileDialog = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleFileInputChange = async (event) => {\n    const files = event.target.files;\n    const filteredFiles = filterFiles(Array.from(files));\n\n    if (filteredFiles.length > 0) {\n      const uploadedFile = filteredFiles[0];\n      setUploadedImage(URL.createObjectURL(uploadedFile));\n\n      // Call API with the uploaded image\n      await uploadImage(uploadedFile);\n    }\n  };\n\n  const filterFiles = (files) => {\n    return files.filter(file => {\n      const fileType = file.type;\n      return fileType === 'image/jpeg' || fileType === 'image/png';\n    });\n  };\n\n  const uploadImage = async (imageFile) => {\n    const formData = new FormData();\n    formData.append('fileToUpload', imageFile);\n\n    try {\n      const response = await fetch('http://127.0.0.1:8000/process_image/', {\n        method: 'POST',\n        body: formData,\n        mode: 'no-cors' // Set mode to 'no-cors' to bypass CORS\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to upload image');\n      }\n    \n      const responseData = await response.json();\n      console.log(response)\n      setApiResponse(responseData);\n      console.log(\"hi\");\n    } catch (error) {\n      console.error('Error uploading image:', error);\n    }\n  };\n\n  return (\n    <div\n      className={`drag-drop-area ${highlight ? 'highlight' : ''}`}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n      onClick={openFileDialog}\n    >\n      <img src={uploadedImage || addimage} alt=\"uploaded image\"/>\n      <input\n        ref={fileInputRef}\n        className=\"file-input\"\n        type=\"file\"\n        onChange={handleFileInputChange}\n        accept=\".jpg,.jpeg,.png\"\n        multiple\n      />\n      <div className=\"drag-drop-text\">\n        <p><span className=\"span1\">Drag and drop</span></p>\n        <p> or <span className=\"span2\">upload</span> your image here.</p>\n      </div>\n      {apiResponse && (\n        <div className=\"api-response\">\n          <h3>API Response:</h3>\n          <pre>{JSON.stringify(apiResponse, null, 2)}</pre>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DragAndDrop;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAyB,IAAxB,CAAEC,eAAgB,CAAC,CAAAD,IAAA,CACtC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACY,aAAa,CAAEC,gBAAgB,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAAgB,YAAY,CAAGf,MAAM,CAAC,IAAI,CAAC,CAEjC,KAAM,CAAAgB,cAAc,CAAIC,KAAK,EAAK,CAChCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBR,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAS,eAAe,CAAGA,CAAA,GAAM,CAC5BT,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED,KAAM,CAAAU,UAAU,CAAG,KAAO,CAAAH,KAAK,EAAK,CAClCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBR,YAAY,CAAC,KAAK,CAAC,CAEnB,KAAM,CAAAW,KAAK,CAAGJ,KAAK,CAACK,YAAY,CAACD,KAAK,CACtC,KAAM,CAAAE,aAAa,CAAGC,WAAW,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAAC,CAAC,CAEpD,GAAIE,aAAa,CAACI,MAAM,CAAG,CAAC,CAAE,CAC5B,KAAM,CAAAC,YAAY,CAAGL,aAAa,CAAC,CAAC,CAAC,CACrCX,gBAAgB,CAACiB,GAAG,CAACC,eAAe,CAACF,YAAY,CAAC,CAAC,CAEnD;AACA,KAAM,CAAAG,WAAW,CAACH,YAAY,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAAI,cAAc,CAAGA,CAAA,GAAM,CAC3BjB,YAAY,CAACkB,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAC,qBAAqB,CAAG,KAAO,CAAAlB,KAAK,EAAK,CAC7C,KAAM,CAAAI,KAAK,CAAGJ,KAAK,CAACmB,MAAM,CAACf,KAAK,CAChC,KAAM,CAAAE,aAAa,CAAGC,WAAW,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAAC,CAAC,CAEpD,GAAIE,aAAa,CAACI,MAAM,CAAG,CAAC,CAAE,CAC5B,KAAM,CAAAC,YAAY,CAAGL,aAAa,CAAC,CAAC,CAAC,CACrCX,gBAAgB,CAACiB,GAAG,CAACC,eAAe,CAACF,YAAY,CAAC,CAAC,CAEnD;AACA,KAAM,CAAAG,WAAW,CAACH,YAAY,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAAJ,WAAW,CAAIH,KAAK,EAAK,CAC7B,MAAO,CAAAA,KAAK,CAACgB,MAAM,CAACC,IAAI,EAAI,CAC1B,KAAM,CAAAC,QAAQ,CAAGD,IAAI,CAACE,IAAI,CAC1B,MAAO,CAAAD,QAAQ,GAAK,YAAY,EAAIA,QAAQ,GAAK,WAAW,CAC9D,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAR,WAAW,CAAG,KAAO,CAAAU,SAAS,EAAK,CACvC,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,cAAc,CAAEH,SAAS,CAAC,CAE1C,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sCAAsC,CAAE,CACnEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,QAAQ,CACdO,IAAI,CAAE,SAAU;AAClB,CAAC,CAAC,CAEF,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAC3C,CAEA,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC1CC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CACrB/B,cAAc,CAACsC,YAAY,CAAC,CAC5BE,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,mBACEnD,KAAA,QACEoD,SAAS,mBAAAC,MAAA,CAAoBjD,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CAC5DkD,UAAU,CAAE3C,cAAe,CAC3B4C,WAAW,CAAEzC,eAAgB,CAC7B0C,MAAM,CAAEzC,UAAW,CACnB0C,OAAO,CAAE9B,cAAe,CAAA+B,QAAA,eAExB5D,IAAA,QAAK6D,GAAG,CAAErD,aAAa,EAAIV,QAAS,CAACgE,GAAG,CAAC,gBAAgB,CAAC,CAAC,cAC3D9D,IAAA,UACE+D,GAAG,CAAEnD,YAAa,CAClB0C,SAAS,CAAC,YAAY,CACtBjB,IAAI,CAAC,MAAM,CACX2B,QAAQ,CAAEhC,qBAAsB,CAChCiC,MAAM,CAAC,iBAAiB,CACxBC,QAAQ,MACT,CAAC,cACFhE,KAAA,QAAKoD,SAAS,CAAC,gBAAgB,CAAAM,QAAA,eAC7B5D,IAAA,MAAA4D,QAAA,cAAG5D,IAAA,SAAMsD,SAAS,CAAC,OAAO,CAAAM,QAAA,CAAC,eAAa,CAAM,CAAC,CAAG,CAAC,cACnD1D,KAAA,MAAA0D,QAAA,EAAG,MAAI,cAAA5D,IAAA,SAAMsD,SAAS,CAAC,OAAO,CAAAM,QAAA,CAAC,QAAM,CAAM,CAAC,oBAAiB,EAAG,CAAC,EAC9D,CAAC,CACLlD,WAAW,eACVR,KAAA,QAAKoD,SAAS,CAAC,cAAc,CAAAM,QAAA,eAC3B5D,IAAA,OAAA4D,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB5D,IAAA,QAAA4D,QAAA,CAAMO,IAAI,CAACC,SAAS,CAAC1D,WAAW,CAAE,IAAI,CAAE,CAAC,CAAC,CAAM,CAAC,EAC9C,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAP,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}